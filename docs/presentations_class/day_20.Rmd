---
title: "Getting Comfortable"
author: J. Hathaway
params:
  day: 20
  ptitle: true
  pbackground: true
  dtype: "none"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)

if (params$day %% 2 == 0) md_intro_format <- "even_intro_format.Rmd"
if (params$day %% 2 == 1) md_intro_format <- "odd_intro_format.Rmd"

```

```{r child=md_intro_format}

```

# Code in the tidyverse


## My old code

Try to write out what this is doing?

```{r p2, eval=FALSE, echo=TRUE}
#library(reshape) # this is needed for old code
gcam <- read.csv("instructor/facetus_pnnl/USTrellis_Example/CASCaDE_A2_Full.csv", stringsAsFactors = FALSE)
agcam <- subset(gcam[,c("scenario","region","input","sector",paste("X",seq(2005,2095,by=5),sep=""))],scenario=="GFDL_A2_RGCAM_medium,date=2012-26-11T18:22:24-05:00")
agcam <- subset(agcam,sector%in%c("resid cooling","resid heating","comm cooling","comm heating"))
agcam.m <- melt(data=agcam[,-1],id.var=c("region","input","sector"))
agcam.m$heat.cool <- gsub("resid ","",gsub("comm ","",agcam.m$sector))
agcam.c.split <- cast(data=agcam.m,region+heat.cool~variable,fun.aggregate=sum,value="value")
agcam.cooling <- subset(agcam.c.split,heat.cool=="cooling")[,-2]
agcam.heating <- subset(agcam.c.split,heat.cool=="heating")[,-2]
agcam.split <- list(heating=agcam.heating,cooling=agcam.cooling)
agcam.c <- cast(data=agcam.m,region~variable,fun.aggregate=sum,value="value")
tgcam <- subset(gcam[,c("scenario","region","input","sector","X2005")],scenario=="GFDL_A2_RGCAM_medium,date=2012-26-11T18:22:24-05:00")
tgcam <- subset(tgcam,sector%in%c("resid cooling","resid heating","comm cooling","comm heating"))
mtgcam <- cast(data=tgcam,region~sector,value="X2005",fun.aggregate=sum)

```

## My new code

```{r p3, eval=FALSE, echo=TRUE}
library(tidyverse)

gcamt <- read_csv("instructor/facetus_pnnl/USTrellis_Example/CASCaDE_A2_Full.csv")

gcamtt <- gcamt %>% 
  dplyr::filter(scenario=="GFDL_A2_RGCAM_medium,date=2012-26-11T18:22:24-05:00", 
         sector %in% c("resid cooling","resid heating","comm cooling","comm heating")) %>%
 # dplyr::mutate(skey = paste(region, input, sector, sep = "_")) %>%
  dplyr::select(-scenario, - Units) %>%
  tidyr::gather(key = year, value = energy,`1990`:`2095`, -region, - input, -sector) %>%
  dplyr::mutate(heat.cool = gsub("resid ","",gsub("comm ","",sector)))

gcam_totals <- gcamtt %>%
  group_by(region, year, heat.cool, sector) %>%
  summarise(energy = sum(energy)) %>% 
  ungroup()
```


# "Big" Data

## Scientists Vs. Analysts

> - Best way to differentiate a data scientist from a data analyst. 
>    - **Data Analyst:** If my tools and data can't answer a question, then the question doesn't get answered.
>    - **Data Scientist:** If my tools and data can't answer a question, then I go get better tools and data.

## Leaving your little computer

> - [The science is the idea and data moving](https://www.youtube.com/embed/Ewd5PXgLXlU?start=488)
> - [Big is different in many ways](https://www.youtube.com/embed/Ewd5PXgLXlU?start=690)

# Maps Vs. Variables

## What is wrong?

"Here, you can take that, that's the final map of the numbers," Trump said, according to Reuters.  "It's pretty good, right? The red is obviously us." [1](http://www.businessinsider.com/trump-2016-electoral-map-reuters-interview-xi-jinping-china-2017-4)

[Trump Map Tweet](../images/trump_map_tweet.png)

## How could we spatially depict the variable of interest?

- [Chloropleth Map](https://en.wikipedia.org/wiki/Choropleth_map)
- [Cartograms](https://en.wikipedia.org/wiki/Cartogram)
- [geofacets](https://hafen.github.io/geofacet/)

## geofacet challenge

**Use the geofacet package to build a map that depicts the important variables more than the spatial area.**

> - Will need to aggregate your data the state level.
> - Will need to use `install.packages("geofacet")` and the `facet_geo()` function.

[data](../data/nytimes_presidential_elections_2016_results_county.csv)

## Checking out some results

- Who has pushed their graphic?
- [Check these out](http://www.businessinsider.com/2016-election-results-maps-population-adjusted-cartogram-2016-11/#heres-the-basic-electoral-college-map-with-states-that-hillary-clinton-won-in-blue-and-states-that-donald-trump-won-in-red-assuming-that-trumps-narrow-lead-in-michigan-continues-to-hold-1)

## Semester Project Discussion

Please make your own issue right now.

> - Use my issue as a starting point - <https://github.com/BYUI335/hathaway/issues/16>.
> - Create a new folder in your repository that is called `semester_project`.
> - If you would like to alter the project, then post a comment to the semester project issue with your update.
> - Call me out and ask me to review and approve changes.

